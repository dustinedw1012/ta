<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>SATO JABAR</title>
      <script src="https://cdn.tailwindcss.com"></script>

      <link rel="stylesheet" href="style.css">

                                                                                               
      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""/>

      <style>
         #map {
            width: 100%;
            height: 100vh;
         }
      </style>


   </head>

   <body>
      <!-- Panel Navigasi -->
      <nav class="bg-[#556B2F] p-4 text-white fixed w-full top-0 z-50">
         <div class="flex justify-between">
            <div class="flex space-x-2">
              <!-- Add your images here with appropriate Tailwind CSS classes -->
              <img src="ITB.png" alt="Logo 1" class="h-10 w-10">
              <img src="KLHK.png" alt="Logo 2" class="h-10 w-10">
              <img src="SATOJABAR.png" alt="Logo 3" class="h-15 w-20">
            </div>
         <div class="flex justify-center">
            <ul class="flex space-x-4">
               <li class="hover:bg-[#475B26] py-2 px-4 rounded text-center">
                  <a href="#Page2" class="block">INFORMASI SATWA LANGKA</a>
               </li>
               <li class="hover:bg-[#475B26] py-2 px-4 rounded text-center">
                  <a href="#Page3" class="block">PERMASALAHAN KONSERVASI</a>
               </li>
               <li class="hover:bg-[#475B26] py-2 px-4 rounded text-center">
                  <a href="#Page4" class="block">PETA DAN STATISTIK</a>
               </li>
            </ul>
         </div>
      </nav>
      <!-- End of Panel Navigasi-->

 
<!-- Outer Container with Background -->
<div class="relative flex flex-col items-center w-full p-4 mt-16">
   <!-- Background Image -->
   <div class="absolute inset-0 z-0 w-full h-full flex justify-center items-center ">
     <img src="Background1.png" alt="Peta Jawa Barat" class="w-full h-full object-cover opacity-40">
   </div>
 
   <!-- Foreground Container -->
   <div class="relative z-10 rounded-lg shadow-lg flex flex-col items-center p-4 w-full max-w-full bg-white/80 opacity">
     <p class="text-center text-2xl font-bold mb-4">PETA KESESUAIAN MULTI HABITAT FAUNA ENDEMIK JAWA BARAT</p>
 
     <!-- Content Container -->
     <div class="flex flex-row w-full h-[750px]">
       <!-- Sidebar Text -->
       <div class="flex flex-col justify-center items-center p-4 w-1/6 bg-white rounded-lg shadow-md mr-2">
         <p class="text-center text-base font-bold">PETA KESESUAIAN MULTI HABITAT FAUNA ENDEMIK JAWA BARAT</p>
       </div>
 
       <!-- Map Section -->
       <div class="w-5/6 rounded-lg overflow-hidden shadow-md">
         <div id="map" class="w-full h-full"></div>
       </div>
     </div>
   </div>
 </div>
 
 
 



<script>
    function showPopup(element) {
      console.log(animalsData);
        // Mengambil teks dari elemen h3
        var titleText = element.textContent || element.innerText;
        console.log(titleText);

        var matchedAnimal = animalsData.find(animal => animal.name === titleText);
      if (matchedAnimal) {
                 // Mengambil teks dari elemen p yang merupakan saudara dari h3
        var detailText = element.nextElementSibling.textContent || element.nextElementSibling.innerText;
        console.log(detailText);
        // Mengambil sumber gambar dari img dalam parent yang sama
        var imgSrc = element.parentNode.parentNode.querySelector('img').src;
        var imgAlt = element.parentNode.parentNode.querySelector('img').alt;
        console.log(imgSrc);
   
        var popupContent = `
            <div class="p-4">
               <img src="${imgSrc}" alt="${imgAlt}" class="w-full h-32 sm:h-48 object-cover">
               <div class="mt-4">
                  <h3 class="text-lg font-bold uppercase">${titleText}</h3>
                  <p class="text-sm">${detailText}</p>
               </div>
               <div class="mt-4">
                  <p class="font-bold uppercase">FAMILY: ${matchedAnimal.famili}</p>
                  <p class="font-bold uppercase">GENUS: ${matchedAnimal.genus}</p>
                  <p class="font-bold uppercase">POPULATION: ${matchedAnimal.sisa_populasi}</p>
               </div>
               <div class="mt-2">
                  <p class="text-sm">${matchedAnimal.deskripsi}</p>
               </div>
            </div>
            `;


        

          // Menampilkan teks dan gambar di dalam popup
          document.getElementById('popup-text').innerHTML = popupContent;

          // Menampilkan popup
          document.getElementById('popup').style.display = 'block';
      } else {
          // Tampilkan pesan error atau isi default jika tidak ada kecocokan
          document.getElementById('popup-text').innerHTML = "<p>Informasi tidak tersedia.</p>";
          document.getElementById('popup').style.display = 'block';
      }


        // Menampilkan teks dan gambar di dalam popup
        document.getElementById('popup-text').innerHTML = popupContent;

        // Menampilkan popup
        document.getElementById('popup').style.display = 'block';
    }

    function closePopup() {
        // Menutup popup
        document.getElementById('popup').style.display = 'none';
    }
</script>

<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
<script src="https://unpkg.com/georaster"></script>
<script src="https://unpkg.com/georaster-layer-for-leaflet"></script>
<script>
  // initialize leaflet map
  var map = L.map('map').setView([0, 0], 5);

  // add OpenStreetMap basemap
  L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
  }).addTo(map);

  var url_to_geotiff_file = "NORMNDVI2010.tif";

  fetch(url_to_geotiff_file)
    .then(response => response.arrayBuffer())
    .then(arrayBuffer => {
      parseGeoraster(arrayBuffer).then(georaster => {
        console.log("georaster:", georaster);

        /*
            GeoRasterLayer is an extension of GridLayer,
            which means can use GridLayer options like opacity.

            Just make sure to include the georaster option!

            http://leafletjs.com/reference-1.2.0.html#gridlayer
        */
   // Example of defining the custom raster layer with no-data handling and red gradient
   const layer = new GeoRasterLayer({
  georaster: georaster,
  opacity: 0.7, // Adjust transparency as needed
  
  // Function to map raster pixel values to colors
  pixelValuesToColorFn: function (values) {
    // Log the values for debugging purposes
    console.log('Raster pixel values:', values);

    // Assuming a single band raster, fetch the first value
    const value = values[0];

    // Handle no-data value (assumed to be 0)
    if (value === 0) {
      return null; // Make the pixel transparent for no-data values
    }

    // Normalize the values to create a gradient from dark to bright red
    const minVal = -1; // Replace with your dataset's known minimum value
    const maxVal = 1; // Replace with your dataset's known maximum value

    // Avoid division by zero if min and max values are the same
    const normalizedValue = (value - minVal) / (maxVal - minVal || 1);

    // Scale the normalized value to a range of 0 to 255
    const redValue = Math.floor(normalizedValue * 255);

    // Return the color as a string
    const color = `rgb(${redValue}, 0, 0)`;
    return color;
  }
});

layer.addTo(map);



        map.fitBounds(layer.getBounds());

    });
  });

</script>

</html>


<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
crossorigin=""></script>

<script>
   var map = L.map('map').setView([-6.87, 108], 13);

   L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
   }).addTo(map);
</script>