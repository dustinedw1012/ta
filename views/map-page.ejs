<!DOCTYPE html>
<html>
   <head>
      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-opacitycontrols/0.1.0/Control.Opacity.css" />
      <link href="/src/output.css" rel="stylesheet">
      <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.css" rel="stylesheet" />
      <link rel="stylesheet" href="L.Control.HtmlLegend.css" />
      <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"></script>
      <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-opacitycontrols/0.1.0/Control.Opacity.js"></script>
      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
      <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
      <script src="L.Control.HtmlLegend.min.js"></script>
      <style>
         .content-wrapper {
         margin-top: 60px;
         padding: 60px;
         }
         .content-wrapper-2 {
         padding-right: 60px;
         padding-left: 60px;
         }
         .component-wrapper {
         margin-bottom: 20px;
         }
         .component-wrapper-2 {
         margin-top: 60px;
         margin-bottom: 60px;
         }
         .leaflet-container {
         background: #ffffff;
         }
         .custom-active-tab {
         color: #047857; /* emerald-700 */
         border-color: #047857; /* emerald-700 */
         }
         .custom-active-tab:hover {
         color: #065f46; /* emerald-900 */
         border-color: #065f46; /* emerald-900 */
         }
         /* Custom styles to make the range input vertical */
         input[type="range"].vertical {
         writing-mode: bt-lr; /* IE */
         -webkit-appearance: slider-vertical; /* WebKit */
         width: 8px;
         height: 200px;
         padding: 0 5px;
         }
         .legend {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 1000; /* Ensure the legend is above the map */
        }
        .heatmap-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: bold;
            width: 40px;
            height: 40px;
        }
        .rotate-270 {
            transform: rotate(-90deg);
        }
      </style>
   </head>
   <body class="bg-white dark:gray-900">
      <!-- Navbar Bagian Navbar -->
      <nav class="bg-white dark:bg-gray-900 fixed w-full z-20 top-0 start-0 border-b border-gray-200 dark:border-gray-600">
         <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
            <a href="/" class="flex items-center space-x-3 rtl:space-x-reverse">
            <img src="ITB.png" class="h-8" alt="ITB Logo">
            <img src="KLHK.png" class="h-8" alt="KLHK Logo">
            <span class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white">Satojabar</span>
            </a>
            <button data-collapse-toggle="navbar-default" type="button" class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-default" aria-expanded="false">
               <span class="sr-only">Open main menu</span>
               <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
                  <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"/>
               </svg>
            </button>
            <div class="hidden w-full md:block md:w-auto" id="navbar-default">
               <ul class="font-medium flex flex-col p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:flex-row md:space-x-8 rtl:space-x-reverse md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700">
                  <li>
                     <a href="/" class="block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-emerald-700 md:p-0 dark:text-white md:dark:hover:text-emerald-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">Beranda</a>
                  </li>
                  <li>
                     <a href="/#about" class="block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-emerald-700 md:p-0 dark:text-white md:dark:hover:text-emerald-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">Tentang</a>
                  </li>
                  <li>
                     <a href="/map" class="block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-emerald-700 md:p-0 dark:text-white md:dark:hover:text-emerald-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">Peta</a>
                  </li>
               </ul>
            </div>
         </div>
      </nav>
      <div class="content-wrapper">
         <div class="component-wrapper">
            <div class="text-center">
               <h1 class="mb-8 text-4xl font-extrabold leading-none tracking-tight text-gray-900 md:text-5xl lg:text-6xl dark:text-white">Peta Kriteria Kesesuaian Habitat</h1>
               <p class="text-lg font-normal text-gray-500 lg:text-xl dark:text-gray-400">Peta berikut menunjukkan area yang menjadi prioritas konservasi, baik untuk pembuatan konservasi baru maupun perluasan area konservasi yang ada. Penentuan prioritas didasarkan pada kriteria area yang berkaitan dengan kesesuaian habitat, jasa ekosistem, tekanan iklim dan antropolog.</p>
            </div>
         </div>
         <div class="component-wrapper">
            <div class="mb-4 border-b border-gray-200 dark:border-gray-700">
               <ul class="flex flex-wrap -mb-px text-sm font-medium text-center" id="default-tab" data-tabs-toggle="#default-tab-content" role="tablist">
                  <li class="me-2" role="presentation">
                     <button class="inline-block p-4 border-b-2 rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300" id="jasa-ekosistem" data-tabs-target="#jasa-ekosistem-tab" type="button" role="tab" aria-controls="dashboard" aria-selected="false">Jasa Ekosistem</button>
                  </li>
                  <li class="me-2" role="presentation">
                     <button class="inline-block p-4 border-b-2 rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300" id="kesesuaian-habitat" data-tabs-target="#kesesuaian-habitat-tab" type="button" role="tab" aria-controls="dashboard" aria-selected="false">Kesesuaian Habitat</button>
                  </li>
                  <li class="me-2" role="presentation">
                     <button class="inline-block p-4 border-b-2 rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300" id="tekanan-iklim" data-tabs-target="#tekanan-iklim-tab" type="button" role="tab" aria-controls="dashboard" aria-selected="false">Tekanan Iklim</button>
                  </li>
                  <li class="me-2" role="presentation">
                     <button class="inline-block p-4 border-b-2 rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300" id="sosio-ekonomi" data-tabs-target="#sosio-ekonomi-tab" type="button" role="tab" aria-controls="dashboard" aria-selected="false">Tekanan Sosio-Ekonomi</button>
                  </li>
                  <li class="me-2" role="presentation">
                     <button class="inline-block p-4 border-b-2 rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300" id="penopang-situs" data-tabs-target="#penopang-situs-tab" type="button" role="tab" aria-controls="dashboard" aria-selected="false">Faktor Penopang Situs Konservasi</button>
                  </li>
                  <li class="me-2" role="presentation">
                     <button class="inline-block p-4 border-b-2 rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300" id="ancaman-situs" data-tabs-target="#ancaman-situs-tab" type="button" role="tab" aria-controls="dashboard" aria-selected="false">Faktor Ancaman Situs Konservasi</button>
                  </li>
                  <li class="me-2" role="presentation">
                     <button class="inline-block p-4 border-b-2 rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300" id="rekomendasi" data-tabs-target="#rekomendasi-tab" type="button" role="tab" aria-controls="dashboard" aria-selected="false">Rekomendasi Area Konservasi</button>
                  </li>
               </ul>
            </div>
            <div id="default-tab-content">
               <div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="jasa-ekosistem-tab" role="tabpanel" aria-labelledby="profile-tab">
                  <p class="text-sm text-gray-500 dark:text-gray-400">This is some placeholder content the <strong class="font-medium text-gray-800 dark:text-white">Profile tab's associated content</strong>. Clicking another tab will toggle the visibility of this one for the next. The tab JavaScript swaps classes to control the content visibility and styling.</p>
               </div>
               <div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="kesesuaian-habitat-tab" role="tabpanel" aria-labelledby="dashboard-tab">
                  <p class="text-sm text-gray-500 dark:text-gray-400">This is some placeholder content the <strong class="font-medium text-gray-800 dark:text-white">Dashboard tab's associated content</strong>. Clicking another tab will toggle the visibility of this one for the next. The tab JavaScript swaps classes to control the content visibility and styling.</p>
               </div>
               <div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="tekanan-iklim-tab" role="tabpanel" aria-labelledby="settings-tab">
                  <p class="text-sm text-gray-500 dark:text-gray-400">This is some placeholder content the <strong class="font-medium text-gray-800 dark:text-white">Settings tab's associated content</strong>. Clicking another tab will toggle the visibility of this one for the next. The tab JavaScript swaps classes to control the content visibility and styling.</p>
               </div>
               <div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="sosio-ekonomi-tab" role="tabpanel" aria-labelledby="contacts-tab">
                  <p class="text-sm text-gray-500 dark:text-gray-400">This is some placeholder content the <strong class="font-medium text-gray-800 dark:text-white">Contacts tab's associated content</strong>. Clicking another tab will toggle the visibility of this one for the next. The tab JavaScript swaps classes to control the content visibility and styling.</p>
               </div>
               <div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="penopang-situs-tab" role="tabpanel" aria-labelledby="profile-tab">
                  <p class="text-sm text-gray-500 dark:text-gray-400">This is some placeholder content the <strong class="font-medium text-gray-800 dark:text-white">Profile tab's associated content</strong>. Clicking another tab will toggle the visibility of this one for the next. The tab JavaScript swaps classes to control the content visibility and styling.</p>
               </div>
               <div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="ancaman-situs-tab" role="tabpanel" aria-labelledby="profile-tab">
                  <p class="text-sm text-gray-500 dark:text-gray-400">This is some placeholder content the <strong class="font-medium text-gray-800 dark:text-white">Profile tab's associated content</strong>. Clicking another tab will toggle the visibility of this one for the next. The tab JavaScript swaps classes to control the content visibility and styling.</p>
               </div>
               <div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="rekomendasi-tab" role="tabpanel" aria-labelledby="profile-tab">
                  <p class="text-sm text-gray-500 dark:text-gray-400">This is some placeholder content the <strong class="font-medium text-gray-800 dark:text-white">Profile tab's associated content</strong>. Clicking another tab will toggle the visibility of this one for the next. The tab JavaScript swaps classes to control the content visibility and styling.</p>
               </div>
            </div>
         </div>
         <div class="component-wrapper">

            <div class="w-full" style="height: 500px;">
                <div id="map" class="w-full h-full relative">
                    <div class="legend absolute bottom-2 left-2 p-2 bg-white shadow-lg rounded-md">
                        <ul id="legend-content">
                            <div class="flex items-center space-x-4">
                                <span class="text-sm text-gray-500">0 ton C/Ha</span>
                                    <div class="w-64 h-4 bg-gradient-to-r from-yellow-100 to-green-900"></div>
                                <span class="text-sm text-gray-500">273 ton C/Ha</span>
                            </div>
                        </ul>
                    </div>
                </div>
            </div>

         </div>
      </div>
      <footer class="footer footer-center p-10 bg-white text-base-content rounded">
         <nav>
            <div class="grid grid-flow-col gap-4">
               <a>
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="fill-current">
                     <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"></path>
                  </svg>
               </a>
               <a>
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="fill-current">
                     <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"></path>
                  </svg>
               </a>
               <a>
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="fill-current">
                     <path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"></path>
                  </svg>
               </a>
            </div>
         </nav>
         <aside>
            <p>Copyright © 2024 - satojabar.com</p>
         </aside>
      </footer>
   </body>
   <script>
      document.addEventListener('DOMContentLoaded', function () {
            const tabs = document.querySelectorAll('#default-tab button');
            tabs.forEach(tab => {
                tab.addEventListener('click', function () {
                    // Remove the active class from all tabs
                    tabs.forEach(t => t.classList.remove('custom-active-tab', 'text-blue-600', 'border-blue-600'));
                    // Add the active class to the clicked tab
                    this.classList.add('custom-active-tab');
                });
            });
      
            // Set the first tab as active by default (if needed)
            const firstTab = document.querySelector('#default-tab button');
            if (firstTab) {
                firstTab.classList.add('custom-active-tab');
            }
        });
      
      // Initialize map
      var map = L.map('map', {
      maxZoom: 10,
      minZoom: 4,
      center: [-1.344321, 117.096827],
      zoom: 8
      });
      map.removeControl(map.zoomControl);
      
      // Define basemaps
      var Esri_WorldTerrain = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}', {
      attribution: 'Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS'
      });
      
      var Esri_WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
      attribution: 'Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ'
      });
      
      var OpenStreetMap = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
      });
      
      var CartoDB_Voyager = L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://carto.com/attributions">CARTO</a>'
      });
      
      var Stamen_Toner = L.tileLayer('https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png', {
      attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under ODbL.'
      });
      
      // Add default basemap
      Esri_WorldTerrain.addTo(map);
      
      // Add scale control
      L.control.scale({
      metric: true,
      imperial: true,
      position: 'bottomright',
      maxWidth: 200
      }).addTo(map);
      
      const legendContent = {
            'jasa-ekosistem': `
                <div class="flex items-center space-x-4">
                    <span class="text-sm text-gray-500">0 ton C/Ha</span>
                        <div class="w-64 h-4 bg-gradient-to-r from-yellow-100 to-green-900"></div>
                    <span class="text-sm text-gray-500">273 ton C/Ha</span>
                </div>
            `,
            'kesesuaian-habitat': `
            <div class="flex items-center space-x-4">
    <span class="text-sm text-gray-500">Sangat Rendah</span>
    <div class="w-64 h-4 bg-gradient-to-r from-purple-900 via-yellow-200 to-red-500"></div>
    <span class="text-sm text-gray-500">Sangat Tinggi</span>
</div>
            `,
            'tekanan-iklim': `
                <div class="flex items-center space-x-4">
                    <span class="text-sm text-gray-500">Rendah</span>
                        <div class="w-64 h-4 bg-gradient-to-r from-green-500 via-yellow-300 to-red-500"></div>
                    <span class="text-sm text-gray-500">Tinggi</span>
                </div>
            `,
            'sosio-ekonomi': `
                <div class="flex items-center space-x-4">
                    <span class="text-sm text-gray-500">Rendah</span>
                    <div class="w-64 h-4 bg-gradient-to-r from-green-500 via-yellow-300 to-red-500"></div>
                    <span class="text-sm text-gray-500">Tinggi</span>
                </div>
            `,
            'penopang-situs': `
                <li><span class="inline-block w-4 h-4 bg-yellow-500 mr-2"></span>Kategori 1</li>
                <li><span class="inline-block w-4 h-4 bg-purple-500 mr-2"></span>Kategori 2</li>
                <li><span class="inline-block w-4 h-4 bg-pink-500 mr-2"></span>Kategori 3</li>
            `,
            'ancaman-situs': `
            <div class="flex items-start space-x-4">
            <!-- Y-axis Labels -->
            <div class="flex flex-col items-center space-y-1 mt-8">
                <span class="text-sm text-gray-500 rotate-270">Tekanan Sosio-ekonomi</span>
            </div>
            <!-- Heatmap Grid -->
            <div class="grid grid-cols-4 grid-rows-4 gap-1">
                <!-- Row 1 -->
                <div class="heatmap-cell bg-green-600 text-white">83</div>
                <div class="heatmap-cell bg-yellow-200">88</div>
                <div class="heatmap-cell bg-orange-400">134</div>
                <div class="heatmap-cell bg-red-600 text-white">66</div>
                <!-- Row 2 -->
                <div class="heatmap-cell bg-green-400 text-white">176</div>
                <div class="heatmap-cell bg-green-200">290</div>
                <div class="heatmap-cell bg-orange-300">357</div>
                <div class="heatmap-cell bg-red-400 text-white">269</div>
                <!-- Row 3 -->
                <div class="heatmap-cell bg-green-500 text-white">218</div>
                <div class="heatmap-cell bg-green-300">482</div>
                <div class="heatmap-cell bg-yellow-400">552</div>
                <div class="heatmap-cell bg-red-400 text-white">225</div>
                <!-- Row 4 -->
                <div class="heatmap-cell bg-green-700 text-white">100</div>
                <div class="heatmap-cell bg-green-400">373</div>
                <div class="heatmap-cell bg-yellow-500">641</div>
                <div class="heatmap-cell bg-red-300">66</div>
            </div>
        </div>
        <!-- X-axis Labels -->
        <div class="flex flex-row justify-between w-full mt-2">
            <span class="text-sm text-gray-500 ml-12">Rendah</span>
            <span class="text-sm text-gray-500">Tekanan Iklim</span>
            <span class="text-sm text-gray-500 mr-12">Tinggi</span>
        </div>
            `,
            'rekomendasi': `
            <div class="flex items-center space-x-4">
                    <span class="text-sm text-gray-500">Rendah</span>
                        <div class="w-64 h-4 bg-gradient-to-r from-green-500 via-yellow-300 to-red-500"></div>
                    <span class="text-sm text-gray-500">Tinggi</span>
                </div>
            `
        };

      // Define layers
      var layers = {
      "jasa-ekosistem": {
        image: "layer_jasa_ekosistem.png",
        bounds: [[-5.914478, 106.370506], [-7.823398, 108.831890]]
      },
      "kesesuaian-habitat": {
        image: "layer_kesesuaian_habitat.png",
        bounds: [[-5.914478, 106.370506], [-7.823398, 108.831890]]
      },
      "tekanan-iklim": {
        image: "RasterDustin2.png",
        bounds: [[-5.914478, 106.370506], [-7.823398, 108.831890]]
      },
      "sosio-ekonomi": {
        image: "layer_sosio_ekonomi.png",
        bounds: [[-5.914478, 106.370506], [-7.823398, 108.831890]]
      },
      "penopang-situs": {
        image: "layer_penopang_situs_konservasi.png",
        bounds: [[-5.914478, 106.370506], [-7.823398, 108.831890]]
      },
      "ancaman-situs": {
        image: "layer_ancaman_situs_konservasi.png",
        bounds: [[-5.914478, 106.370506], [-7.823398, 108.831890]]
      },
      "rekomendasi": {
        image: "layer_area_rekomendasi_konservasi.png",
        bounds: [[-5.914478, 106.370506], [-7.823398, 108.831890]]
      }
      };
      
      var currentLayer = null;
      
      // Function to update the map layer
      function updateMapLayer(show_layer, show_imageBounds) {
      if (currentLayer) {
        map.removeLayer(currentLayer);
      }
      currentLayer = L.imageOverlay(show_layer, show_imageBounds).addTo(map);
      map.fitBounds(show_imageBounds);
      
      // Add opacity control
      L.control.opacity([currentLayer], {
                position: 'topright',
                collapsed: false,
                label: 'Opacity'
            }).addTo(map);
      }
      
      // Add default layer (layer 1) on load
      document.addEventListener('DOMContentLoaded', function() {
      updateMapLayer(layers["jasa-ekosistem"].image, layers["jasa-ekosistem"].bounds);
      });
      
      // Handle tab button clicks
      const tabButtons = document.querySelectorAll('button[role="tab"]');
      tabButtons.forEach(button => {
      button.addEventListener('click', function() {
        const layerKey = this.id;
        console.log(layerKey);
        document.getElementById('legend-content').innerHTML = legendContent[layerKey] || '';
        if (layers[layerKey]) {
            updateMapLayer(layers[layerKey].image, layers[layerKey].bounds);
        }
      });
      });
      
      // Add basemap control
      var baseMaps = {
      "Terrain": Esri_WorldTerrain,
      "Imagery": Esri_WorldImagery,
      "OpenStreetMap": OpenStreetMap,
      "Voyager": CartoDB_Voyager,
      "Toner": Stamen_Toner
      };
      
      L.control.layers(baseMaps).addTo(map);
      
       // Handle opacity slider change
       const opacitySlider = document.getElementById('opacity-slider');
        opacitySlider.addEventListener('input', function() {
            if (currentLayer) {
                currentLayer.setOpacity(this.value);
            }
        });

        // document.querySelectorAll('button[data-tabs-target]').forEach(button => {
        //     button.addEventListener('click', (e) => {
        //         const targetId = e.target.id;
        //         console.log(targetId);
        //         document.getElementById('legend-content').innerHTML = legendContent[targetId] || '';
        //     });
        // });

        // document.addEventListener('DOMContentLoaded', function() {
        //     let selectedTab = '';

        //     const tabButtons = document.querySelectorAll('button[role="tab"]');
        //     tabButtons.forEach(button => {
        //         button.addEventListener('click', function() {
        //             selectedTab = this.id;
        //             console.log(`Selected tab ID: ${selectedTab}`);
        //             document.getElementById('legend-content').innerHTML = legendContent[targetId] || '';
        //         });
        //     });
        // });

    </script>
   </script>
</html>